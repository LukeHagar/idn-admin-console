import{s as T,f as g,a as w,g as h,h as $,S as E,c as N,d as C,j as b,i as P,A as y,o as q,z as M}from"../chunks/scheduler.10bc074a.js";import{S as V,i as D,t as p,c as I,a as _,g as L,b as k,d as x,m as j,e as O}from"../chunks/index.7b3d626a.js";import{P as R}from"../chunks/Progress.f79dd2c2.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.ae9fcbec.js";import{t as S,T as z}from"../chunks/Table.f5db4492.js";import{a as A}from"../chunks/alasql.min.1f65b74d.js";const J=async({fetch:r})=>({response:r("/api/sailpoint/search",{method:"POST",body:JSON.stringify({indices:["identities"],query:{query:"NOT _exists_:attributes.cloudLifecycleState"},sort:["name"]}),headers:{"content-type":"application/json"}})}),ee=Object.freeze(Object.defineProperty({__proto__:null,load:J},Symbol.toStringTag,{value:"Module"}));function F(r){let t,n;return t=new R({}),{c(){k(t.$$.fragment)},l(e){x(t.$$.fragment,e)},m(e,l){j(t,e,l),n=!0},p:M,i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){p(t.$$.fragment,e),n=!1},d(e){O(t,e)}}}function B(r){let t,n;return t=new z({props:{class:"w-full",source:r[0],interactive:!0}}),t.$on("selected",H),{c(){k(t.$$.fragment)},l(e){x(t.$$.fragment,e)},m(e,l){j(t,e,l),n=!0},p(e,l){const u={};l&1&&(u.source=e[0]),t.$set(u)},i(e){n||(_(t.$$.fragment,e),n=!0)},o(e){p(t.$$.fragment,e),n=!1},d(e){O(t,e)}}}function G(r){let t,n,e,l="Listing of identities that are missing the cloud life cycle state attribute",u,s,o,c;const d=[B,F],i=[];function v(a,f){return a[0]?0:1}return s=v(r),o=i[s]=d[s](r),{c(){t=g("div"),n=g("div"),e=g("div"),e.textContent=l,u=w(),o.c(),this.h()},l(a){t=h(a,"DIV",{class:!0});var f=$(t);n=h(f,"DIV",{class:!0});var m=$(n);e=h(m,"DIV",{class:!0,"data-svelte-h":!0}),E(e)!=="svelte-12wr2y6"&&(e.textContent=l),u=N(m),o.l(m),m.forEach(C),f.forEach(C),this.h()},h(){b(e,"class","text-2xl py-2 text-center"),b(n,"class","flex justify-center mt-4 flex-col align-middle"),b(t,"class","p-4")},m(a,f){P(a,t,f),y(t,n),y(n,e),y(n,u),i[s].m(n,null),c=!0},p(a,[f]){let m=s;s=v(a),s===m?i[s].p(a,f):(L(),p(i[m],1,1,()=>{i[m]=null}),I(),o=i[s],o?o.p(a,f):(o=i[s]=d[s](a),o.c()),_(o,1),o.m(n,null))},i(a){c||(_(o),c=!0)},o(a){p(o),c=!1},d(a){a&&C(t),i[s].d()}}}function H(r){console.log(r)}function K(r,t,n){let{data:e}=t;console.log(e);let l,u;return q(async()=>{if(l=await e.response.json(),console.log(l),JSON.stringify(e)!=="{}"){let s=[];for(let c of l){let d=[];for(let i of c.accounts)i.disabled==!1&&d.push(i.source.name);s.push({name:c.displayName,source:d.join(", "),created:c.created,accessCount:c.accessCount,entitlementCount:c.entitlementCount,roleCount:c.roleCount})}let o=A("SELECT name, source, created, accessCount, entitlementCount, roleCount FROM ?",[s]);n(0,u={head:["Name","Sources","Created","Access Count","Entitlement Count","Role Count"],body:S(o,["name","source","created","accessCount","entitlementCount","roleCount"]),meta:S(o,["name","source","created","accessCount","entitlementCount","roleCount"])})}}),r.$$set=s=>{"data"in s&&n(1,e=s.data)},[u,e]}class te extends V{constructor(t){super(),D(this,t,K,G,T,{data:1})}}export{te as component,ee as universal};
